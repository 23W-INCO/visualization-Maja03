from fhir.resources.bundle import Bundle
from fhir.resources.observation import Observation
from fhir.resources.quantity import Quantity

# Przykładowe dane
fhir_blood_test = {
    "resourceType": "Bundle",
    "type": "collection",
    "entry": [
        {
            "fullUrl": "urn:uuid:4d3b31e4-9a4b-4c03-80e9-1d633f261e20",
            "resource": {
                "resourceType": "Observation",
                "status": "final",
                "code": {
                    "coding": [
                        {
                            "system": "http://loinc.org",
                            "code": "1742-6",
                            "display": "Alanine aminotransferase [Enzymatic activity/volume] in Serum or Plasma"
                        }
                    ],
                    "text": "Alanine aminotransferase [Enzymatic activity/volume] in Serum or Plasma"
                },
                "valueQuantity": Quantity(value=30, unit="U/L"),
                "effectiveDateTime": "2022-01-04T08:00:00Z"
            }
        },
        {
            "fullUrl": "urn:uuid:5db7d90d-6c7b-4e2f-ba22-5e4e47d6862a",
            "resource": {
                "resourceType": "Observation",
                "status": "final",
                # Dodaj kolejne obserwacje według potrzeb
            }
        }
    ]
}

# Tworzenie obiektu Bundle
bundle = Bundle.parse_obj(fhir_blood_test)

# Wydrukuj obiekt Bundle w formie JSON
print(bundle.json(indent=2))
